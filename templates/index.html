<!DOCTYPE html>
<html>
<head>
    <title>Video Downloader</title>
</head>
<body style="font-family: Arial; text-align: center; margin-top: 50px;">

    <h2>Video Downloader</h2>

    <input type="text" id="url" placeholder="Paste video URL" style="width:400px; padding:10px;">
    <button onclick="downloadVideo()" style="padding:10px;">Download</button>

    <div id="result" style="margin-top:30px;"></div>

    <script>
        function downloadVideo() {
            const url = document.getElementById("url").value;

            fetch("/download", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({url: url})
            })
            .then(res => res.json())
            .then(data => {
                if (data.error) {
                    document.getElementById("result").innerHTML =
                        "<p style='color:red'>" + data.error + "</p>";
                    return;
                }

                document.getElementById("result").innerHTML = `
                    <video width="720" controls>
                        <source src="${data.stream_url}" type="video/mp4">
                    </video>
                    <br><br>
                    <a href="${data.download_url}">
                        <button style="padding:10px;">Download File</button>
                    </a>
                `;
            });
        }
    </script>

</body>
</html>
